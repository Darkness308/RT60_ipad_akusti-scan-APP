name: SwiftLint

on:
  push:
    branches: [ main, develop ]
  pull_request:
    branches: [ main, develop ]

jobs:
  swiftlint:
    runs-on: macos-latest
    
    steps:
    - uses: actions/checkout@v4
    
    - name: Install SwiftLint
      run: |
        brew install swiftlint
    
    - name: SwiftLint Version
      run: swiftlint version
    
    - name: SwiftLint
      run: |
        swiftlint lint --reporter github-actions-logging
    
    - name: SwiftLint Auto-correct (Comment on PR)
      if: github.event_name == 'pull_request'
      run: |
        # Check if auto-correct would make changes
        if swiftlint autocorrect --dry-run; then
          echo "SwiftLint auto-correct suggestions available"
          echo "Run 'swiftlint autocorrect' locally to fix formatting issues"
        else
          echo "No SwiftLint auto-correct suggestions"
        fi